; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27027.1 

	TTL	F:\Source_Code\Visual_Studio\Projects\NATIVE\DLL\NativeConsoleAppAids\NativeConssoleAppAids\GetUnicodeStringPointer.c
	THUMB
	.drectve
	DCB	"-defaultlib:MSVCRTD "
	DCB	"-defaultlib:OLDNAMES "

	.msvcjmc
|__2CC6E67D_corecrt_stdio_config@h| DCB 0x1
|__05476D76_corecrt_wstdio@h| DCB 0x1
|__A452D4A0_stdio@h| DCB 0x1
|__7B7A869E_ctype@h| DCB 0x1
|__457DD326_basetsd@h| DCB 0x1
|__4384A2D9_corecrt_memcpy_s@h| DCB 0x1
|__4E51A221_corecrt_wstring@h| DCB 0x1
|__2140C079_string@h| DCB 0x1
|__29C54D54_arm_neon@h| DCB 0x1
|__1887E595_winnt@h| DCB 0x1
|__9FC7C64B_processthreadsapi@h| DCB 0x1
|__FA470AEC_memoryapi@h| DCB 0x1
|__F37DAFF1_winerror@h| DCB 0x1
|__7A450CCC_winbase@h| DCB 0x1
|__86261D59_stralign@h| DCB 0x1
|__41381B41_corecrt_wconio@h| DCB 0x1
|__C0802A2B_corecrt_wtime@h| DCB 0x1
|__A40A425D_stat@h| DCB 0x1
|__5A74375D_wchar@h| DCB 0x1
|__6B9C2DC0_tchar@h| DCB 0x1
|__63CBE9B2_getunicodestringpointer@c| DCB 0x1
	EXPORT	|GetUnicodeStringPointer|
	EXPORT	|__JustMyCode_Default|
	IMPORT	|__imp_LoadStringW|
	IMPORT	|ReportLoadStringError|
	IMPORT	|__CheckForDebuggerJustMyCode|
	IMPORT	|__GSHandlerCheck|
	IMPORT	|__security_pop_cookie|
	IMPORT	|__security_push_cookie|
;	COMDAT .pdata
.pdata	SEGMENT
|$pdata2$GetUnicodeStringPointer| DCD imagerel |GetUnicodeStringPointer|
	DCD	imagerel |$unwind3$GetUnicodeStringPointer|
;	COMDAT .xdata
.xdata	SEGMENT
|$unwind3$GetUnicodeStringPointer| DCD 0x44300041
	DCD	0xfc01e804
	DCD	0xff0410a8
	DCD	0x8801e804
	DCD	0xff05ef10
	DCD	imagerel |__GSHandlerCheck|
	DCD	0xffffffe1
;	COMDAT .pdata
.pdata	SEGMENT
|$pdata1$__JustMyCode_Default| DCD imagerel |__JustMyCode_Default|
	DCD	imagerel |$unwind2$__JustMyCode_Default|
;	COMDAT .xdata
.xdata	SEGMENT
|$unwind2$__JustMyCode_Default| DCD 0x10a00005
	DCD	0xff00a8fb
; Function compile flags: /Odt
;	COMDAT __JustMyCode_Default
.text$mn	SEGMENT

|__JustMyCode_Default| PROC
	push        {r11,lr}
	mov         r11,sp
|$M2|
|$M1|
	pop         {r11,pc}
|$M3|

	ENDP  ; |__JustMyCode_Default|

; Function compile flags: /Odtp
; File f:\source_code\visual_studio\projects\native\dll\nativeconsoleappaids\nativeconssoleappaids\getunicodestringpointer.c
;	COMDAT GetUnicodeStringPointer
.text$mn	SEGMENT

|GetUnicodeStringPointer| PROC

; 23   : {

	push        {r0-r3}
	push        {r4,r11,lr}
	add         r11,sp,#4
	bl          __security_push_cookie
	sub         sp,sp,#0x10
|$M13|
	ldr         r0,|$LN10@GetUnicode|		; =|__63CBE9B2_getunicodestringpointer@c|
	bl          __CheckForDebuggerJustMyCode

; 24   : 	LPTSTR lpTheString = NULL ;

	movs        r3,#0
	str         r3,[sp,#0xC]

; 25   : 
; 26   : 	if ( plpuintLength )

	ldr         r3,[sp,#0x28]
	cmp         r3,#0
	beq         |$LN2@GetUnicode|

; 27   : 	{	// The documented return value of LoadString excludes the trailing null. However, when nBufferMax = RCDATA_INPLACE_POINTER, it is included.
; 28   : 		if ( *plpuintLength = ( LoadString ( phSourceModule ,					// _in_     HMODULE   hModule

	movs        r3,#0
	add         r2,sp,#0xC
	ldr         r1,[sp,#0x24]
	ldr         r0,[sp,#0x20]
	ldr         r4,|$LN9@GetUnicode|		; =|__imp_LoadStringW|
	ldr         r4,[r4]
	blx         r4
	str         r0,[sp,#4]
	ldr         r3,[sp,#4]
	subs        r2,r3,#1
	ldr         r3,[sp,#0x28]
	str         r2,[r3]
	ldr         r3,[sp,#0x28]
	ldr         r3,[r3]
	cmp         r3,#0
	beq         |$LN4@GetUnicode|

; 29   :                                            puintStringID ,						// _In_     UINT      uID
; 30   : 									       ( LPTSTR ) &lpTheString ,			// _Out_    LPTSTR    lpBuffer
; 31   : 										   RCDATA_INPLACE_POINTER ) 			// _In_     int       nBufferMax
; 32   : 											- TRAILING_NULL_ALLOWANCE_P6C ) )
; 33   : 		{	// Have pointer, will return.
; 34   : 			return lpTheString ;

	ldr         r3,[sp,#0xC]
	str         r3,[sp]
	b           |$LN1@GetUnicode|
|$LN4@GetUnicode|

; 35   : 		}	// if ( ( *plpuintLength = LoadString ( phSourceModule , puintStringID , ( LPTSTR ) &lpTheString , RCDATA_INPLACE_POINTER ) ) )
; 36   : 	}	// TRUE (Return the string length through the supplied pointer) block, if ( plpuintLength )

	b           |$LN3@GetUnicode|
|$LN2@GetUnicode|

; 37   : 	else
; 38   : 	{
; 39   : 		if ( LoadString ( phSourceModule ,										// _in_     HMODULE   hModule

	movs        r3,#0
	add         r2,sp,#0xC
	ldr         r1,[sp,#0x24]
	ldr         r0,[sp,#0x20]
	ldr         r4,|$LN9@GetUnicode|		; =|__imp_LoadStringW|
	ldr         r4,[r4]
	blx         r4
	str         r0,[sp,#8]
	ldr         r3,[sp,#8]
	cmp         r3,#0
	beq         |$LN5@GetUnicode|

; 40   : 			              puintStringID ,										// _In_     UINT      uID
; 41   : 			              ( LPTSTR ) &lpTheString ,								// _Out_    LPTSTR    lpBuffer
; 42   : 			              RCDATA_INPLACE_POINTER ) )							// _In_     int       nBufferMax
; 43   : 		{	// Have pointer, will return.
; 44   : 			return lpTheString ;

	ldr         r3,[sp,#0xC]
	str         r3,[sp]
	b           |$LN1@GetUnicode|
|$LN5@GetUnicode|
|$LN3@GetUnicode|

; 45   : 		}	// if ( LoadString ( phSourceModule , puintStringID , ( LPTSTR ) &lpTheString , RCDATA_INPLACE_POINTER ) )
; 46   : 	}	// FALSE (The caller said that it doesn't need to know how long the string is.) block, if ( plpuintLength )
; 47   : 
; 48   : 	//	------------------------------------------------------------------------
; 49   : 	//	Make a report about the error retrievable through FB_GetlpErrMsgSprintf,
; 50   : 	//	then return NULL (always NULL) to signal the caller to fetch the message
; 51   : 	//	or do whatever else it wants about the load error. If the Structured
; 52   : 	//	Exception Handling flag is enabled, this call won't actually return,
; 53   : 	//	because raising the exception unwinds the stack.
; 54   : 	//	------------------------------------------------------------------------
; 55   : 
; 56   : 	ReportLoadStringError ( phSourceModule ,

	movs        r2,#0
	ldr         r1,[sp,#0x24]
	ldr         r0,[sp,#0x20]
	bl          ReportLoadStringError

; 57   : 	                        puintStringID ,
; 58   : 	                        RCDATA_INPLACE_POINTER ) ;
; 59   : 	
; 60   : 	return NULL;

	movs        r3,#0
	str         r3,[sp]
|$LN1@GetUnicode|

; 61   : }	// GetUnicodeStringPointer

	ldr         r0,[sp]
|$M7|
	add         sp,sp,#0x10
	bl          __security_pop_cookie
	pop         {r4,r11}
	ldr         pc,[sp],#0x14
|$LN11@GetUnicode|
|$M12|
	__debugbreak
|$LN8@GetUnicode|
|$LN9@GetUnicode|
	DCD         |__imp_LoadStringW|
|$LN10@GetUnicode|
	DCD         |__63CBE9B2_getunicodestringpointer@c|
|$M14|

	ENDP  ; |GetUnicodeStringPointer|

	END
